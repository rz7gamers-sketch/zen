<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ™‚</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* BODY & BACKGROUND */
body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: linear-gradient(135deg, #f78ca0, #fbc2eb, #a6c1ee);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
    position: relative;
}

/* FLOATING SHAPES */
.bg-shapes { position:absolute; inset:0; z-index:0; pointer-events:none; }
.bg-shapes span { position:absolute; display:block; border-radius:50%; background: rgba(255,255,255,0.2); animation: float 20s linear infinite; }
@keyframes float { 0%{transform:translateY(0) scale(1);} 100%{transform:translateY(-120vh) scale(1.3);} }

/* CARDS */
.box { background: rgba(255,255,255,0.95); padding:28px; border-radius:12px; width:90%; max-width:420px; text-align:center; box-shadow:0 8px 25px rgba(0,0,0,0.1); position:relative; z-index:2; transition: transform 0.3s ease; }
.hidden { display:none; }

/* BUTTONS */
button { padding:12px 20px; margin-top:16px; border-radius:12px; border:none; background: linear-gradient(135deg,#f78ca0,#fbc2eb); color:white; cursor:pointer; font-size:16px; transition: transform 0.15s ease; }
button:hover { transform: scale(1.05); }
button:active { transform: scale(0.95); }

/* NO BUTTON */
.no-btn { position:absolute; z-index:3; }

/* IMAGES */
img { width:100%; border-radius:10px; margin-top:15px; }

/* NOTES */
.note { font-size:14px; margin-top:8px; color:#555; }

/* KEYWORD ANIMATIONS */
.glow-bounce { display:inline-block; color:black; animation: glow 1.5s infinite alternate, bounce 1.2s infinite; }
@keyframes glow { 0%{text-shadow:0 0 3px #fff;} 100%{text-shadow:0 0 12px #fff;} }
@keyframes bounce { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-6px);} }

/* SHAKE CARD */
@keyframes shake { 0%{transform:translateX(0);} 20%{transform:translateX(-8px);} 40%{transform:translateX(8px);} 60%{transform:translateX(-6px);} 80%{transform:translateX(6px);} 100%{transform:translateX(0);} }

/* CONFETTI */
.confetti-piece { position:absolute; width:8px; height:8px; background:red; z-index:9999; pointer-events:none; opacity:0.9; border-radius:50%; animation:fall 3s linear forwards; }
@keyframes fall {0%{transform:translateY(0) rotate(0deg);} 100%{transform:translateY(100vh) rotate(720deg); opacity:0;}}

/* EMOJI RAIN */
.emoji { position:absolute; font-size:24px; animation: fallEmoji 3s linear forwards; pointer-events:none; }
@keyframes fallEmoji { 0%{transform:translateY(-50px) rotate(0deg); opacity:1;} 100%{transform:translateY(100vh) rotate(360deg); opacity:0;} }

/* SELFIE GALLERY */
#gallery img { width:80px; margin:5px; border-radius:8px; }

/* RESPONSIVE */
@media(max-width:480px){ .box{width:95%; padding:24px;} button{width:100%; font-size:18px; padding:16px;} img{width:100%;} }
</style>
</head>
<body>

<div class="bg-shapes"></div>

<!-- STEP 1 -->
<div class="box" id="step1">
<h3>Mood thik hoise apu?</h3>
<button onclick="show('step2')">No</button>
</div>

<!-- STEP 2 -->
<div class="box hidden" id="step2">
<h3>Accha tahole ki kora jay bolen to</h3>
<button onclick="show('step3')">Ekta <span class="glow-bounce">baddie</span> dekhben?</button>
</div>

<!-- STEP 3 -->
<div class="box hidden" id="step3">
<img src="her-image.jpg" alt="Baddie">
<p>Ei <span class="glow-bounce">baddie</span> ke sad dekhle manay na, please hashen?</p>
<input type="file" accept="image/*" onchange="uploadSelfie(this,'step4')">
<div class="note">Selfie ta na dile website ta r agay jabe na</div>
</div>

<!-- STEP 4 -->
<div class="box hidden" id="step4">
<h3>Ami ki <span class="glow-bounce">Batman</span>?</h3>
<button onclick="show('step5')">Yes</button>
<button class="no-btn" id="noBtn">No</button>
</div>

<!-- STEP 5 -->
<div class="box hidden" id="step5">
<h3>Eito good job ðŸ˜Œ<br>dekhi abar ektu hashen to</h3>
<input type="file" accept="image/*" onchange="uploadSelfie(this,'final')">
<div class="note">Selfie ta na dile website ta shesh hobe na</div>
</div>

<!-- FINAL PAGE -->
<div class="box hidden" id="final">
<h3>You know you can still send infinite amount of <span class="glow-bounce">selfies</span> ðŸ˜‰</h3>
<div id="gallery"></div>
<input type="file" accept="image/*" onchange="uploadSelfie(this,'final')">
<div class="note">Upload korlei selfie gallery te add hobe ðŸ˜‹</div>
</div>

<script>
/* SHOW STEPS */
function show(id){ document.querySelectorAll('.box').forEach(b=>b.classList.add('hidden')); document.getElementById(id).classList.remove('hidden'); }

/* NO BUTTON SHAKING */
const noBtn = document.getElementById("noBtn");
const step4Card = document.getElementById("step4");
noBtn.addEventListener("mouseover", ()=>{
    step4Card.style.animation="shake 0.5s";
    setTimeout(()=> step4Card.style.animation="",500);
    const x=Math.random()*(window.innerWidth-120);
    const y=Math.random()*(window.innerHeight-60);
    noBtn.style.left=x+"px"; noBtn.style.top=y+"px";
});

/* FLOATING SHAPES */
const shapeBox=document.querySelector(".bg-shapes");
for(let i=0;i<15;i++){
    const s=document.createElement("span");
    const size=Math.random()*80+20;
    s.style.width=size+"px"; s.style.height=size+"px";
    s.style.left=Math.random()*100+"%";
    s.style.bottom="-150px";
    s.style.background=`rgba(255,255,255,${Math.random()*0.3 +0.1})`;
    s.style.animationDuration=(10+Math.random()*10)+"s";
    shapeBox.appendChild(s);
}

/* EMOJI RAIN */
function emojiRain(){
    for(let i=0;i<10;i++){
        const e=document.createElement("div");
        e.className="emoji";
        e.textContent="ðŸ˜‹";
        e.style.left=Math.random()*90+"%";
        e.style.fontSize=(18+Math.random()*12)+"px";
        document.body.appendChild(e);
        setTimeout(()=>e.remove(),3000);
    }
}

/* CONFETTI */
function confettiBurst(){
    const colors=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93"];
    for(let i=0;i<50;i++){
        const c=document.createElement("div");
        c.className="confetti-piece";
        c.style.background=colors[Math.floor(Math.random()*colors.length)];
        c.style.left=Math.random()*100+"%";
        c.style.width=c.style.height=(6+Math.random()*6)+"px";
        c.style.animationDuration=(2+Math.random()*2)+"s";
        document.body.appendChild(c);
        setTimeout(()=>c.remove(),3000);
    }
}

/* UPLOAD SELFIE */
function uploadSelfie(input,nextStep){
    const file=input.files[0];
    if(!file) return;

    const formData=new FormData();
    formData.append('selfie',file);

    fetch('/upload',{ method:'POST', body: formData })
    .then(res=>res.json())
    .then(data=>{
        console.log(data.message);
        show(nextStep);
        emojiRain();
        if(nextStep==='final') confettiBurst();
        addToGallery(file);
    });
}

/* SELFIE GALLERY */
function addToGallery(file){
    const reader = new FileReader();
    reader.onload = function(e){
        const img = document.createElement("img");
        img.src = e.target.result;
        document.getElementById("gallery").appendChild(img);
    }
    reader.readAsDataURL(file);
}

/* PARTICLE INTERACTION */
document.addEventListener("mousemove", e=>{
    document.querySelectorAll(".bg-shapes span").forEach(s=>{
        const rect=s.getBoundingClientRect();
        const dx=e.clientX-(rect.left+rect.width/2);
        const dy=e.clientY-(rect.top+rect.height/2);
        const dist=Math.sqrt(dx*dx+dy*dy);
        if(dist<100){ s.style.transform=`translate(${dx/15}px,${dy/15}px)`; }
        else { s.style.transform=`translate(0,0)`; }
    });
});
</script>
</body>
</html>
